<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../css/admin.css">
    <title>Ver producto</title>
</head>
<body>
    <header>
        <nav class="navbar-panel ">
            <a href="../index.html">Ir a la tienda</a>
            <a href="lista-productos.html">Ver inventario</a>
            <a href="agregar-producto.html">Agregar producto</a>
            <a href="ver-producto.html">Ver producto</a>
            <a href="editar-eliminar-producto.html">Editar/Eliminar producto</a>
            <a href="ver-mensajes.html">Mensajes</a>

        </nav>
    </header>
    <form id="form-obtener-producto">
        <label for="codigo">Código:</label>
        <input type="number" id="codigo" required><br>
        <button type="submit">Ver Producto</button>
        <div id="datos-producto"></div>
    </form>
    <footer><p>Trabajo Práctico integrador - Codo a Codo 2024</p></footer>
    <script>

        const URL = "http://127.0.0.1:5000/"

        document.getElementById("form-obtener-producto").addEventListener('submit', function(event){
                event.preventDefault();
                codigo = document.getElementById('codigo').value
                console.log(codigo)

                fetch(URL + 'productos/' + codigo)
                .then(response => {
                    if (response.ok) {
                        
                        return response.json()
                    } else {
                        throw new Error('Error al obtener los datos del producto.')
    
                    }
                })
    
                .then(function(data){
                    console.log(data)
                    lista=
                        '<ul>' +
                            '<li><img src=http://127.0.0.1:5000/static/imagenes/' + data.imagen_url + ' alt="Imagen del producto"></li>'+
                            '<li>Nombre d ela imagen: ' + data.imagen_url + '</li>' +
                            '<li>Descripcion: ' + data.descripcion + '</li>' +
                            '<li>Precio: ' + data.precio + '</li>' +
                            '<li> Stock disponible: ' + data.cantidad + '</li>'+
                            '<li> Categoría ' + data.categoria + '</li>'+
                        '</ul>'
                        document.getElementById('datos-producto').innerHTML=lista;
                        

                })

                .catch(function (error) {
                    alert('Producto no encontrado');
                })
            })
    </script>

</body>
</html>